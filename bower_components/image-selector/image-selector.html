<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../../bower_components/nuxeo-ui-elements/viewers/nuxeo-image-viewer.html">

<dom-module id="image-selector"> <template>
<style>
:host {
	display: block;
}

nuxeo-image-viewer {width:499px; height:499px; position:absolute; top:50px; left:50px;}
#layout {z-index:200; pointer-events: none; background-image:url('../../img/layout-1-theocrates.png'); width:500px; height:500px;position:absolute; top:50px; left:50px; background-size: contain;}
</style>
<div>
	<input id="upload" type='file' on-change="_changed" />
	<div id="layout"></div>
	<nuxeo-image-viewer controls id="canevaPerso" src=""></nuxeo-image-viewer>
</div>
</template> <script>
    /**
     * `image-selector`
     * 
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class ImageSelector extends Polymer.Element {
      static get is() { return 'image-selector'; }
      static get properties() {
        return {
          prop1: {
            type: String,
            value: 'image-selector'
          }
        };
      }
      _changed(e){
    	    var caneva = this.$.canevaPerso;
    		var file = e.target.files[0];
    		var reader = new FileReader();
    		reader.addEventListener("load", function () {
    			caneva.setAttribute("src", reader.result);
    		}, false);
     		if (file) {
     		    reader.readAsDataURL(file);
     		}
  	  }
    }
    window.customElements.define(ImageSelector.is, ImageSelector);
  </script> </dom-module>
